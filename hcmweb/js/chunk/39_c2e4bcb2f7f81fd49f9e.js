(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{1098:function(e,t){},165:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(720);t.default={Encrypt:function(e){var t=n.enc.Utf8.parse("hcmabcdefghijklm"),a=n.enc.Utf8.parse(e);return n.AES.encrypt(a,t,{mode:n.mode.ECB,padding:n.pad.Pkcs7}).toString()},Decrypt:function(e){var t=n.enc.Utf8.parse("hcmabcdefghijklm"),a=n.AES.decrypt(e,t,{mode:n.mode.ECB,padding:n.pad.Pkcs7});return n.enc.Utf8.stringify(a).toString()}}},779:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=h(a(23)),r=h(a(347)),u=h(a(11)),l=h(a(130)),s=h(a(19)),i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(22),a(348),a(26),a(169),a(20);var c=h(a(596)),o=h(a(13)),d=h(a(165)),f=h(a(69));function h(e){return e&&e.__esModule?e:{default:e}}var p=function(t){function a(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t));return n.chSearchIpt=function(e,t){var a=n.state;a[t]=e.target.value,n.setState(a)},n.handleClearIconClick=function(e){var t=n.state;t[e]=null,n.setState(t)},n.seSearchIpt=function(e,t){var a=n.state;a[t]=e,n.setState(a)},n.onSearch=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n.setState({pageNo:1,realname:e?null:n.state.realname,status:e?null:n.state.status,username:e?null:n.state.username,oldSearch:{realname:e?null:n.state.realname,status:e?null:n.state.status,username:e?null:n.state.username}},function(){n.getList()})},n.getRolePage=function(){o.default.get("/hcm/role/getRolePage",{params:{pageNo:1,pageSize:999}}).then(function(e){n.setState({rolePage:e.data.data.content})})},n.getFuByIds=function(){o.default.get("/hcm/departmentin/fuByIds",{params:{id:0}}).then(function(e){var t=e.data.data;n.setState({treeData:function e(t){return t.map(function(t,a){return null!=t.subSysDepartmentIn?{title:t.departName,value:""+t.id,key:""+t.id,children:e(t.subSysDepartmentIn)}:{title:t.departName,value:""+t.id,key:""+t.id}})}(t||[])})})},n.getList=function(){var e=n.state,t=e.realname,a=e.username,r=e.status,u=e.pageNo,l=e.pageSize;o.default.get("/hcm/userin/getlist",{params:{realname:t,status:r,username:a,pageNo:u,pageSize:l}}).then(function(e){n.setState({dataList:e.data.data.userin_list,pageNo:e.data.data.page_info.pageNo,pageSize:e.data.data.page_info.pageSize,totalNum:e.data.data.page_info.totalNum},function(){n.allClick(!0)})}).catch(function(e){s.default.error(e.statusText)})},n.allClick=function(t){var a=n.state.columns;if(1==t)return"checkStatue"==a[0].key&&a.splice(0,1),void n.setState({columns:a});"checkStatue"==a[0].key?a.splice(0,1):a.unshift({title:"",dataIndex:"checkStatue",key:"checkStatue",width:"5%",render:function(t,a,r){return e.createElement(l.default,{checked:a.checkStatue,onChange:function(e){return n.onCheckbox(e,t,a,r)}})}}),n.setState({columns:a})},n.checkAll=function(e){var t=n.state.dataList;t.forEach(function(t,a){t.checkStatue=e}),n.setState({dataList:t,checkAll:e})},n.changePagination=function(e,t){n.setState({pageNo:e,pageSize:t},function(){n.getList()})},n.onPaginationSize=function(e,t){n.setState({pageNo:1,pageSize:t},function(){n.getList()})},n.fullSpinVisible=function(e){n.setState({fullSpinVisible:e})},n.allStart=function(){var e=[],t=n.state.oldSearch,a=t.realname,r=t.username,u=t.status;n.state.dataList.filter(function(e,t){return e.checkStatue}).forEach(function(t,a){e.push(t.id)}),0!=e.length?(n.fullSpinVisible(!0),o.default.post("/hcm/user/StartOrStop",{userIds:n.state.checkAll?"checkAllKefu":e.join(","),status:1,usertype:"u",realname:n.state.checkAll?a:"",username:n.state.checkAll?r:"",status1:n.state.checkAll?u:""}).then(function(e){n.fullSpinVisible(!1),"10000"==e.data.status?(s.default.success(e.data.message),n.onSearch(!0)):s.default.error(e.data.message)}).catch(function(e){n.fullSpinVisible(!1),s.default.error(e.statusText)})):s.default.error("至少选择一条")},n.allStop=function(){var e=[],t=n.state.oldSearch,a=t.realname,r=t.username,u=t.status;n.state.dataList.filter(function(e,t){return e.checkStatue}).forEach(function(t,a){e.push(t.id)}),0!=e.length?(n.fullSpinVisible(!0),o.default.post("/hcm/user/StartOrStop",{userIds:n.state.checkAll?"checkAllKefu":e.join(","),status:0,usertype:"u",realname:n.state.checkAll?a:"",username:n.state.checkAll?r:"",status1:n.state.checkAll?u:""}).then(function(e){n.fullSpinVisible(!1),"10000"==e.data.status?(n.onSearch(!0),s.default.success(e.data.message)):s.default.error(e.data.message)}).catch(function(e){n.fullSpinVisible(!1),s.default.error(e.statusText)})):s.default.error("至少选择一条")},n.aAction=function(e,t,a){o.default.post(e,{userIds:t,status:a,usertype:"u"}).then(function(e){s.default.success(e.data.message),"10000"==e.data.status&&n.getList()}).catch(function(e){s.default.error(e.statusText)})},n.handleSubmit=function(e){e.preventDefault();var t=function(e,t){o.default.post(e,t).then(function(e){LoadingModal({bl:!1}),"10000"==e.data.status?(n.stateModal(!1,"",!1),n.getList(),n.props.form.setFieldsValue({}),s.default.success(e.data.message)):s.default.warning(e.data.message)}).catch(function(e){LoadingModal({bl:!1}),s.default.error(e.statusText)})};n.props.form.validateFields(function(e,a){if(!e){var r=n.state,u=r.targetModal,l=r.type;if(u.id?a.id=u.id:delete a.id,"新增"==l&&!f.default.checkAccount(a.username))return void s.default.error("请按照要求用户名");if(!f.default.checkPassword(a.password))return void s.default.error("密码长度不符");if(!f.default.legnthCheck(a.realname,"INPUT"))return void s.default.error("姓名长度不允许超过50");if(!f.default.legnthCheck(a.memo,"URL"))return void s.default.error("备注说明长度不允许超过500");LoadingModal({bl:!0,text:"保存中,请稍后..."}),a.username=f.default.trim(a.username),a.password=d.default.Encrypt(f.default.trim(a.password)),a.departmentId=a.departmentid,delete a.departmentid,"新增"==l?t("/hcm/userin/create",a):"编辑"==l&&t("/hcm/userin/update",a)}})},n.stateModal=function(e,t,a){!1===a&&(a={username:null,realname:null,roleIds:null,password:"******",memo:null}),a.password="******",a.roleIds=a.roleid,n.setState({visible:e,type:t,targetModal:a})},n.unBindphone=function(e){o.default.get("/hcm/user/UnbindPhone",{params:{mobiles:e.id,usertype:"u"}}).then(function(e){s.default.success(e.data.message),"10000"==e.data.status&&n.getList()}).catch(function(e){s.default.error(e.statusText)})},n.state={rolePage:[],treeData:[],fullSpinVisible:!1,type:null,dataList:[],targetModal:{username:null,roleIds:null,realname:null,password:"******",memo:null},realname:null,status:null,username:null,oldSearch:{realname:null,status:null,username:null},pageNo:1,pageSize:10,checkAll:!1,totalNum:null,columns:[{title:"序号",dataIndex:"index",key:"index",width:"6%",render:function(e,t,a){return a+1}},{title:"姓名",dataIndex:"realname",key:"realname",width:"12%"},{title:"用户名",dataIndex:"username",key:"username",width:"12%"},{title:"绑定手机",dataIndex:"mobile",key:"mobile",width:"17%",render:function(t,a){return e.createElement("div",null,t&&t.length?t:"--",t&&t.length?e.createElement("span",{onClick:function(){return n.unBindphone(a)},className:"unphone"},e.createElement(u.default,{type:"link"}),"解绑手机"):null)}},{title:"备注说明",dataIndex:"memo",key:"memo",width:"20%"},{title:"状态",dataIndex:"status",key:"status",width:"6%",render:function(t,a,u){return e.createElement(r.default,{checked:"1"==t,onChange:function(){return n.aAction("/hcm/user/StartOrStop",a.id,"1"==t?0:1)},checkedChildren:"开",unCheckedChildren:"关",defaultChecked:!0})}},{title:"操作",key:"action",align:"right",width:"8%",render:function(t,a,r){return e.createElement("span",{key:"index"},e.createElement("a",{style:{marginRight:"10px"},onClick:function(){return n.stateModal(!0,"编辑",a)}},e.createElement("img",{style:{verticalAlign:"text-bottom",paddingRight:"4px"},src:"../../../img/icon/icon_operating_edit.png"}),"编辑"))}}]},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,e.Component),i(a,[{key:"componentDidMount",value:function(){this.getList(),this.getRolePage(),this.getFuByIds()}},{key:"onCheckbox",value:function(e,t,a,n){var r=this.state.dataList;r[n].checkStatue?r[n].checkStatue=!1:r[n].checkStatue=!0,this.setState({dataList:r,checkAll:!1})}},{key:"render",value:function(){return e.createElement(c.default,{that:this})}}]),a}();t.default=n.default.create()(p)}).call(this,a(1))}}]);