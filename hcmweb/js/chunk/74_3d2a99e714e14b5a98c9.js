(window.webpackJsonp=window.webpackJsonp||[]).push([[74,75,239],{1075:function(e,t){},1076:function(e,t){},1077:function(e,t){},1091:function(e,t){},28:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var n=function(t){function n(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e.Component),a(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return e.createElement("div",{className:this.props.clazzName?this.props.clazzName:"Copyright"},"Copyright © 杭州久点网络技术有限公司")}}]),n}();t.default=n}).call(this,a(1))},29:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=l(a(48));a(47);var r=l(a(28));function l(e){return e&&e.__esModule?e:{default:e}}a(1075);var d=function(t){return e.createElement("div",{className:"layout-wrapper "+(t.className||"")},e.createElement("div",{className:"header-wrapper"},e.createElement(n.default,{className:"breadcrumb"},t.breadcrumbList.map(function(a,r){return""===t.linkList[r]?e.createElement(n.default.Item,{key:a},a):e.createElement(n.default.Item,{href:"javascript:;",key:a},e.createElement("span",{onClick:function(){t.history.go(-t.linkList[r])}},a))}))),e.createElement("div",{className:"layout-content"},t.children),e.createElement("div",{className:"copyright"},e.createElement(r.default,null)))};d.defaultProps={title:"标题",breadcrumbList:[],linkList:[]},t.default=d}).call(this,a(1))},534:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=h(a(40)),r=h(a(35)),l=h(a(25)),d=h(a(19)),i=h(a(38)),o=h(a(146)),u=h(a(14)),s=h(a(23)),c=h(a(30));a(49),a(50),a(24),a(20),a(37),a(145),a(18),a(22),a(32),a(728);var m=h(a(15)),f=h(a(29)),p=(h(a(28)),h(a(13)));function h(e){return e&&e.__esModule?e:{default:e}}var y=c.default.Option,g=s.default.Item,E=(0,m.default)(function(t){var a=t.state,n=a.addshow,r=a.treeData,l=a.expandedKeys,d=a.visible,s=a.confirmLoading,c=a.ModalText,m=a.ModalTexts;return e.createElement(f.default,{breadcrumbList:["子账号管理","部门管理"],linkList:["",""]},e.createElement("div",{className:"DepartmentManagement-wrapper"},e.createElement("div",{className:"content"},e.createElement("div",{className:"add-box"},e.createElement(u.default,{disabled:n,onClick:function(){return t.addStatus(!0)},className:"add-but",type:"dashed"},"+新增部门")),n?e.createElement(b,{that:t}):null,e.createElement("div",{className:"tree-list"},null!=r?e.createElement(o.default,{expandedKeys:l,onExpand:function(e,a){return t.onExpand(e,a)},showLine:!0},t.creatTreeDom(r)):null)),e.createElement(i.default,{maskClosable:!1,visible:d,onOk:t.handleOk,confirmLoading:s,onCancel:t.handleCancels},e.createElement("span",{style:{display:"inline-block "}}," ",e.createElement("img",{src:"../../../../img/userTB.jpg",alt:""})," "),e.createElement("span",{style:{display:"inline-block ",marginLeft:"10px",marginTop:"20px"}}," ",e.createElement("h5",null,c),e.createElement("h5",null,m)))))});t.default=E;var b=s.default.create()(function(t){var a=t.form.getFieldDecorator,i=t.that,o=i.addStatus,m=i.getList;console.log(t);return e.createElement(s.default,{onSubmit:function(e){e.preventDefault(),t.form.validateFields(function(e,t){e||(console.log(t),""!=t.departNamex&&void 0!=t.departNamex?t.departNamex.length<=50?void 0!=t.defaultValue?p.default.post("/hcm/department/savaDepartment",{parentId:0,departName:t.departNamex,departLeader:t.defaultValue.join(",")}).then(function(e){1e4==e.data.status?(m(),o(!1)):400==e.data.status&&d.default.error(e.data.message)}):p.default.post("/hcm/department/savaDepartment",{parentId:0,departName:t.departNamex,departLeader:""}).then(function(e){console.log(e),1e4==e.data.status?(m(),o(!1)):400==e.data.status?d.default.error(e.data.message):10400==e.data.status&&d.default.error(e.data.message)}):d.default.error("新增部门名字限制50个字符以内！"):d.default.error("请输入新增部门名称！"))})}},e.createElement(n.default,{style:function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}({marginTop:20,justifyContent:"space-between",alignItems:"center",height:40},"marginTop",14),type:"flex",justify:"space-between"},e.createElement(r.default,{style:{height:"100%"},span:9},e.createElement(g,null,a("departNamex",{})(e.createElement(l.default,{placeholder:"请输入部门名称"})))),e.createElement(r.default,{style:{height:"100%"},span:9},e.createElement(g,null,a("departLeader",{})(e.createElement(c.default,{mode:"multiple",placeholder:"请选择负责人"},e.createElement(y,{value:"disabled",disabled:!0},"暂无数据"))))),e.createElement(r.default,{style:{height:"100%"},className:"text-right",span:4},e.createElement(g,null,e.createElement(u.default,{type:"primary",htmlType:"submit"}," 确定 "),e.createElement(u.default,{onClick:function(){return o(!1)},style:{marginLeft:"20px"},type:"primary"},"取消 ")))))})}).call(this,a(1))},728:function(e,t){},799:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=f(a(40)),r=f(a(35)),l=f(a(25)),d=f(a(19)),i=f(a(30)),o=f(a(23)),u=f(a(146)),s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(49),a(50),a(24),a(20),a(32),a(22),a(145);var c=f(a(534)),m=f(a(13));function f(e){return e&&e.__esModule?e:{default:e}}function p(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}var h=u.default.TreeNode,y=o.default.Item,g=i.default.Option,E=o.default.create()(function(t){var a=t.form.getFieldDecorator,u=function(){var e=t.state.addBox,a=new Set(t.state.expandedKeys);a.delete(""+t.item.id),e.delete(t.item.id),t.state.addBox=e,t.state.expandedKeys=[].concat(p(a)),t.getList()};return e.createElement(o.default,null,e.createElement(n.default,{style:{justifyContent:"space-between",alignItems:"center",height:40,marginTop:8},type:"flex",justify:"space-between"},e.createElement(r.default,{span:9},e.createElement(y,null,a("departName",{})(e.createElement(l.default,{placeholder:"请输入部门名称",style:{position:"absolute",width:"240px",bottom:"-20px"}})))),e.createElement(r.default,{span:9},e.createElement(y,{style:{width:"100%"}},a("departLeader",{})(e.createElement(i.default,{style:{position:"absolute",width:"240px",bottom:"-20px"},mode:"multiple",placeholder:"请选择负责人"},e.createElement(g,{value:"disabled",disabled:!0},"暂无数据"))))),e.createElement(r.default,{className:"text-right",span:4},e.createElement(y,null,e.createElement(n.default,{type:"flex",justify:"space-between"},e.createElement(r.default,null,e.createElement("a",{onClick:function(e){e.preventDefault(),t.form.validateFields(function(e,a){e||(void 0!=a.departName&&""!=a.departName?a.departName.length<=50?m.default.post("/hcm/department/savaDepartment",{parentId:t.item.id,departName:a.departName,departLeader:[]}).then(function(e){1e4==e.data.status?u():10400==e.data.status&&(d.default.error(e.data.message),u())}):d.default.error("部门名称限制50个字符以内！"):d.default.error("请输入新增的部门名称！"))})}}," 确定")),e.createElement(r.default,null,e.createElement("a",{onClick:u},"取消")))))))}),b=o.default.create()(function(t,a){var o=t.form.getFieldDecorator,u=function(){var e=t.childrenString.addBoxtwo,a=new Set(t.childrenString.expandedKeystwo);a.delete(""+t.item.id),e.delete(t.item.id),t.childrenString.addBoxtwo=e,t.childrenString.expandedKeystwo=[].concat(p(a)),t.getList()};return e.createElement(n.default,{className:"item",type:"flex",justify:"space-between"},e.createElement(r.default,{span:9},e.createElement(y,null,o("departNamel",{initialValue:t.item.departName})(e.createElement(l.default,{placeholder:"请输入部门名称"})))),e.createElement(r.default,{span:9},e.createElement(y,null,o("departName",{initialValue:t.item.departLeader})(e.createElement(i.default,{mode:"multiple",style:{display:"block",width:"250px",marginTop:"5px"},placeholder:"请选择负责人",onChange:function(e){t.childrenString.onChangeSele=e.join(",")}},""!=t.childrenString.childrenString?t.childrenString.childrenString[0].map(function(t,a){return e.createElement(g,{key:a,value:t.id},t.realname)}):"")))),e.createElement(r.default,{span:4},e.createElement(n.default,{type:"flex",justify:"space-between"},e.createElement(r.default,null,e.createElement("a",{onClick:function(e){e.preventDefault(),t.form.validateFields(function(e,a){e||(void 0!=a.departNamel&&""!=a.departNamel?a.departNamel.length<=50?0==isNaN(a.departName)?m.default.post("/hcm/department/savaDepartment",{parentId:t.item.parentid,id:t.item.id,departName:a.departNamel,departLeader:a.departName.join(",")}).then(function(e){1e4==e.data.status?u():10400==e.data.status&&(d.default.error(e.data.message),u())}):""!=a.departName?m.default.post("/hcm/department/savaDepartment",{parentId:t.item.parentid,id:t.item.id,departName:a.departNamel,departLeader:t.childrenString.childrenStrings[0].join(",")}).then(function(e){1e4==e.data.status?u():10400==e.data.status&&(d.default.error(e.data.message),u())}):m.default.post("/hcm/department/savaDepartment",{parentId:t.item.parentid,id:t.item.id,departName:a.departNamel,departLeader:[]}).then(function(e){1e4==e.data.status?u():10400==e.data.status&&(d.default.error(e.data.message),u())}):d.default.error("部门名称限制50个字符以内！"):d.default.error("请输入新增的部门名称！"))})}},"保存")),e.createElement(r.default,null,e.createElement("a",{onClick:u},"取消")))))}),v=function(t){function a(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var l=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t));return l.addStatus=function(e){l.setState({addshow:e})},l.handleCancels=function(){l.setState({visible:!1})},l.handleOk=function(){null==l.state.handleOk.subSysDepartment?(l.setState({ModalText:"你确认要删除该部门嘛？",confirmLoading:!0}),m.default.post("/hcm/department/deleteDepartment",{id:l.state.handleOk.id}).then(function(e){1e4==e.data.status?setTimeout(function(){l.setState({visible:!1,confirmLoading:!1}),l.getList()},2e3):10420==e.data.status&&(d.default.error(e.data.message),setTimeout(function(){l.setState({visible:!1,confirmLoading:!1}),l.getList()},2e3))})):l.setState({ModalText:"您暂时不能删除该部门",ModalTexts:"原因该部门下存在子级或子账号！",confirmLoading:!1,visible:!1})},l.getList=function(){m.default.get("/hcm/department/fuByIds",{params:{id:0}}).then(function(e){l.setState({treeData:e.data.data})}).catch(function(e){d.default.error(e.statusText)})},l.creatTreeDom=function(t){var a=l.state.addBox;return t.map(function(t,n){return e.createElement(h,{className:t.subSysDepartment||a.has(t.id)?"":"leaf",title:l.titleTreeNode(t),key:t.id},a.has(t.id)?e.createElement(h,{className:"leaf",title:e.createElement(E,{state:l.state,getList:l.getList,item:t}),key:"add"+t.id}):null,t.subSysDepartment?l.creatTreeDom(t.subSysDepartment):null)})},l.BJDepartNext=function(e){console.log(e);var t=l.state.addBoxtwo,a=new Set(l.state.expandedKeystwo);t.clear(),a.add(""+e.id),t.add(e.id),l.setState({addBoxtwo:t,expandedKeystwo:[].concat(p(a))}),m.default.post("/hcm/userout/getDepartmentLeaderList",{departmentId:e.id}).then(function(e){if(1e4==e.data.status){var t=[],a=[];e.data.data.forEach(function(e){t.push({realname:e.realname,id:e.id}),a.push(e.id)}),l.setState({childrenString:[],childrenStrings:[]},function(){l.state.childrenString.push(t),l.state.childrenStrings.push(a)}),console.log(l.state.childrenString)}})},l.RemoveDepartNext=function(e){l.setState({visible:!0,handleOk:e}),null==e.subSysDepartment?l.setState({ModalText:"你确认要删除该部门嘛？",ModalTexts:""}):l.setState({ModalText:"您暂时不能删除该部门,",ModalTexts:"原因该部门下存在子级或子账号！"})},l.addDepartNext=function(e){var t=l.state.addBox,a=new Set(l.state.expandedKeys);a.add(""+e.id),t.add(e.id),console.log(t),l.setState({addBox:t,expandedKeys:[].concat(p(a))})},l.titleTreeNode=function(t){var a=l.state.addBoxtwo;return e.createElement(e.Fragment,null,a.has(t.id)?e.createElement(b,{childrenString:l.state,getList:l.getList,removeDepartNext:l.removeDepartNext,item:t}):e.createElement(n.default,{className:"item",type:"flex",justify:"space-between"},e.createElement(r.default,{span:9,style:{overflow:"hidden"}},t.departName),e.createElement(r.default,{span:9},"负责人:",t.departLeader),e.createElement(r.default,{span:4},e.createElement(n.default,{type:"flex",style:{height:"100%"},justify:"space-between"},e.createElement(r.default,null,e.createElement("a",{onClick:function(){return l.addDepartNext(t)}},"新增下级")),e.createElement(r.default,null,e.createElement("a",{onClick:function(){return l.BJDepartNext(t)}},"编辑")),e.createElement(r.default,null,e.createElement("a",{onClick:function(){return l.RemoveDepartNext(t)}},"删除"))))))},l.onExpand=function(e,t){l.setState({expandedKeys:e})},l.state={treeData:[],addshow:!1,expandedKeys:[],expandedKeystwo:[],visible:!1,confirmLoading:!1,handleOk:"",handleOkEId:"",ModalText:"",ModalTexts:"",m:!1,onChangeSele:[],childrenString:[],childrenStrings:[],addBox:new Set,addBoxtwo:new Set},l}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,e.Component),s(a,[{key:"componentDidMount",value:function(){this.getList()}},{key:"render",value:function(){return e.createElement(c.default,{that:this})}}]),a}();t.default=v}).call(this,a(1))}}]);