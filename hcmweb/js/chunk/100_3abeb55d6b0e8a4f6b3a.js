(window.webpackJsonp=window.webpackJsonp||[]).push([[100],{814:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=r(a(25)),i=r(a(19)),o=r(a(38)),l=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}();a(24),a(20),a(37);var s=r(a(601)),c=r(a(13));r(a(69));function r(t){return t&&t.__esModule?t:{default:t}}var u=o.default.confirm,d=function(e){function a(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return o.onAddBoxFrom=function(t){o.setState({actionVisible:t})},o.changeTabs=function(t){console.log(t),o.setState({platform:t,pageNo:1,pageSize:10,dataList:[],selectedRowKeys:[],title:null},function(){o.getList()})},o.onSearch=function(){o.setState({pageNo:1,pageSize:10,selectedRowKeys:[]},function(){o.getList()})},o.searchChange=function(t){o.setState({title:t.target.value})},o.onSubmit=function(t,e){t.whitetype=o.state.platform,t.whitename=t.title.join(","),delete t.title,c.default.post("/hcm/iprWhitelist/save",t).then(function(t){"10000"==t.data.status?(o.getList(),o.onAddBoxFrom(!1),e(),i.default.success(t.data.data)):i.default.error(t.data.message)})},o.getList=function(){var t=o.state,e=t.pageNo,a=t.pageSize,n=t.platform,l=t.title;c.default.get("/hcm/iprWhitelist/getPageBybmcid",{params:{whitename:l,whitetype:n,pageNo:e,pageSize:a}}).then(function(t){o.setState({dataList:t.data.data.content,pageNo:t.data.data.pageNumber,pageSize:t.data.data.pageSize,totalNum:t.data.data.totalElements,checkAll:!1,oldTitle:l,selectedRowKeys:[]})}).catch(function(t){i.default.error(t.statusText)})},o.onTableCheckChange=function(t){o.setState({selectedRowKeys:t,checkAll:!1})},o.changePagination=function(t,e){o.setState({pageNo:t,pageSize:e},function(){o.getList()})},o.onPaginationSize=function(t,e){o.setState({pageNo:1,pageSize:e},function(){o.getList()})},o.formatColumn=function(){var e=[{title:"No",dataIndex:"index",width:"80px",key:"index",render:function(e,a,n){return t.createElement("div",{style:{width:"40px"}},n+1)}},{title:"店铺名称",dataIndex:"whitename",key:"whitename",render:function(e,a,i){return a.show?t.createElement(n.default,{maxLength:32,onChange:function(t){return o.changName(t,a,i)},value:a.oldData.whitename}):e}},{title:"操作",dataIndex:"action",key:"action",align:"right",render:function(e,a,n){return a.show?t.createElement(t.Fragment,null,t.createElement("a",{onClick:function(){return o.saveItem(a,n)},style:{marginRight:"20px"}},"保存"),t.createElement("a",{onClick:function(){return o.cancelItem(a,n)}},"取消")):t.createElement(t.Fragment,null,t.createElement("a",{onClick:function(){return o.editItem(a,n)},style:{marginRight:"20px"}},"编辑"),t.createElement("a",{onClick:function(){return o.rmItem(a)}},"删除"))}}];return"TB"!=o.state.platform&&"1688"!=o.state.platform&&"XY"!=o.state.platform||(e[1].title="旺旺名称"),e},o.saveItem=function(t,e){var a=o.state.platform;c.default.post("/hcm/iprWhitelist/update",{whitename:t.oldData.whitename,whitetype:t.oldData.whitetype,id:t.oldData.id}).then(function(t){"10000"==t.data.status?(o.changeTabs(a),i.default.success(t.data.message)):i.default.error(t.data.message)}).catch(function(t){i.default.error(t.statusText)})},o.editItem=function(t,e){var a=o.state.dataList;a[e].oldData=Object.assign({},t),a[e].show=!0,o.setState({dataList:a})},o.cancelItem=function(t,e){var a=o.state.dataList;delete a[e].oldData,delete a[e].show,o.setState({dataList:a})},o.changName=function(t,e,a){var n=o.state.dataList;n[a].oldData.whitename=t.target.value,o.setState({dataList:n})},o.rmItem=function(e){var a=o,n=o.state.platform;u({title:null,content:t.createElement("div",null,t.createElement("div",{className:"tips"},"提示"),t.createElement("div",{className:"pline"}),t.createElement("p",{className:"Dtitle"},"你确认要删除这一项吗?"),t.createElement("p",null,"删除后",t.createElement("span",{className:"red"},"将无法恢复!"))),okText:"确定",cancelText:"取消",className:"alert-item-confirm",okButtonProps:{className:"btn2-main"},cancelButtonProps:{className:"btn2-sub"},onOk:function(){c.default.post("/hcm/iprWhitelist/delete",{iprWhitelistIds:e.id,whitetype:n}).then(function(t){"10000"==t.data.status?(a.changeTabs(n),i.default.success(t.data.message)):i.default.error(t.data.message)}).catch(function(t){i.default.error(t.statusText)})}})},o.allStopStart=function(){var e=o.state,a=e.selectedRowKeys,n=e.totalNum,l=e.checkAll,s=e.oldTitle,r=e.platform,d=o;0!=a.length?u({title:null,content:t.createElement("div",null,t.createElement("div",{className:"tips"},"提示"),t.createElement("div",{className:"pline"}),t.createElement("p",{className:"Dtitle"},"你确认要删除",l?n:a.length,"项吗?")),okText:"确定",cancelText:"取消",className:"alert-item-confirm",okButtonProps:{className:"btn2-main"},cancelButtonProps:{className:"btn2-sub"},onOk:function(){c.default.post("/hcm/iprWhitelist/delete",{iprWhitelistIds:l?"checkAll":a.join(","),whitename:s,whitetype:r}).then(function(t){"10000"==t.data.status?(d.changeTabs(r),i.default.success(t.data.message)):i.default.error(t.data.message)}).catch(function(t){i.default.error(t.statusText)})}}):i.default.warning("至少选择一项")},o.checkAll=function(t){var e=o.state.selectedRowKeys;t?o.state.dataList.forEach(function(t,a){e.push(t.id)}):e=[],o.setState({checkAll:t,selectedRowKeys:e})},o.state={platform:"TB",title:null,dataList:[],pageNo:1,pageSize:10,totalNum:0,checkAll:!1,selectedRowKeys:[],actionVisible:!1},o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(a,t.Component),l(a,[{key:"componentDidMount",value:function(){this.getList()}},{key:"render",value:function(){return t.createElement(s.default,{that:this})}}]),a}();e.default=d}).call(this,a(1))}}]);