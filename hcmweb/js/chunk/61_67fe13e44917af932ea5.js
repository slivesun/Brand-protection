(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{1089:function(e,t){},792:function(e,t,a){"use strict";(function(e,n){Object.defineProperty(t,"__esModule",{value:!0});var l=f(a(38)),i=f(a(126)),s=f(a(127)),c=f(a(101)),o=f(a(74)),r=f(a(19)),u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(37),a(167),a(166),a(102),a(94),a(20);var m=f(a(598)),d=f(a(13));function f(e){return e&&e.__esModule?e:{default:e}}var p=function(t){function a(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t));return u.onSearch=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];u.setState({pageNo:1,dealername:e?null:u.state.dealername,bossid:e?null:u.state.bossid,takePeople:e?null:u.state.takePeople,contact:e?null:u.state.contact,memoDealername:e?null:u.state.memoDealername,oldSearch:{dealername:e?null:u.state.dealername,bossid:e?null:u.state.bossid,takePeople:e?null:u.state.takePeople,contact:e?null:u.state.contact,memoDealername:e?null:u.state.memoDealername}},function(){u.getList()})},u.getList=function(){var e=u.state,t=e.dealername,a=e.bossid,n=e.takePeople,l=e.contact,i=e.memoDealername;d.default.get("/hcm/dealer/getlist",{params:{pageNo:u.state.pageNo,pageSize:u.state.pageSize,dealername:t,bossid:a,takePeople:n,contact:l,memoDealername:i}}).then(function(e){var t=e.data.data;u.setState({dataList:t,pageNo:t.page_info.pageNo,pageSize:t.page_info.pageSize,linkSwitch:"0"!=t.bmainCustomer.invitestatus,checkAll:!1,selectedRowKeys:[],totalNum:t.page_info.totalNum})}).catch(function(e){r.default.error(e.statusText)})},u.getColumn=function(){d.default.get("/hcm/hcmCustomModel/getBybmcidAndModule",{params:{module:"DEALER"}}).then(function(e){u.setState({setTableData:e.data.data})}).catch(function(e){r.default.error(e.statusText)})},u.chSearchIpt=function(e,t){var a=u.state;a[t]=e.target.value,u.setState(a)},u.handleClearIconClick=function(e){var t=u.state;t[e]=null,u.setState(t)},u.formatColumn=function(){var t=[],a=[{title:"No",dataIndex:"index",key:"index",fixed:"left",width:"80px",render:function(t,a,n){return e.createElement("div",{style:{width:"80px"}},n+1)}}],l=u.state.setTableData,r=function(e){l[e].data.forEach(function(a,n){if(a.isChecked)return a.target=[e,n,a.fieldRequired],t.push(a)})};for(var m in l)r(m);return t.sort(function(e,t){return e.sort-t.sort}),t.forEach(function(l,i){a.push({title:l.fieldname,dataIndex:l.fieldvalue,key:l.fieldvalue,width:t.length>4?"dealername"===l.fieldvalue?"400px":"200px":100/t.length+"%",render:function(t,a,i){return"DATE"==l.fieldtype?t?n(t).format("YYYY-MM-DD"):t:"dealername"===l.fieldvalue?"{}"==JSON.stringify(a.status_info)?e.createElement("a",{className:"tab-a-text",href:"/index.html#/ClientDetail/"+a.id},t):e.createElement("div",null,e.createElement("a",{className:"tab-a-text",href:"/index.html#/ClientDetail/"+a.id},t),e.createElement(o.default,{placement:"bottom",title:a.status_info.info},e.createElement("span",{className:a.status_info.info_type},a.status_info.title))):e.createElement("div",{className:"table-tb-box"},e.createElement(o.default,{placement:"bottom",title:t},t))}})}),a.push({title:e.createElement("div",{className:"action"},e.createElement("span",null,"操作")),key:"action",fixed:"right",width:"160px",render:function(t,a,n){return e.createElement("div",{className:"action"},e.createElement("a",{href:"/index.html#/CustomerEditor/"+a.id},e.createElement("img",{style:{verticalAlign:"text-bottom",paddingRight:"4px"},src:"../../../img/icon/icon_operating_edit.png"}),"编辑"),e.createElement(c.default,{type:"vertical"}),e.createElement(i.default,{overlay:e.createElement(s.default,null,e.createElement(s.default.Item,null,e.createElement("a",{className:"A-COLOR",href:"/index.html#/ChangeHistorys/DEALER/"+a.dealername+"/"+a.id},e.createElement("img",{style:{verticalAlign:"text-bottom",paddingRight:"4px"},src:"../../../img/icon/icon_operating_history.png"}),"变更历史")),e.createElement(s.default.Item,null,e.createElement("a",{className:"A-COLOR",style:{color:"#1890ff"},onClick:function(){return u.allStopConfirm("item",a.id)}},e.createElement("img",{style:{verticalAlign:"text-bottom",paddingRight:"4px"},src:"../../../img/icon/icon_operating_Release.png"}),"解约")))},e.createElement("a",{className:"ant-dropdown-link"},"··· 更多")))}}),a},u.addModalStatus=function(e){u.setState({addModalStatus:e,clientNames:[]})},u.addClientChange=function(e){u.setState({clientNames:e})},u.onSubClients=function(){u.state.clientNames.length>300?r.default.error(e.createElement("span",null,"客户名称数量每次最多添加300个！当前数量为",e.createElement("span",null,u.state.clientNames.length))):u.setState({spinning:!0},function(){d.default.post("/hcm/dealer/create",{dealernameList:JSON.stringify(u.state.clientNames)}).then(function(e){e.data.data.dbRepeateSet.length?e.data.data.dbRepeateSet.forEach(function(e){r.default.error("已有名为"+e+"的客户，请勿重复添加")}):u.setState({clientNames:[]}),u.setState({spinning:!1,addModalStatus:!1},function(){u.getList(),e.data.data.insertSet.length&&r.default.success(e.data.message)})}).catch(function(e){u.setState({spinning:!1}),r.default.error(e.statusText)})})},u.inviteLinkStatus=function(e){u.setState({inviteLinkStatus:e})},u.inviteLinkSwitch=function(e){u.setState({linkSwitch:e},function(){d.default.get("/hcm/cus/changeInviteStatus",{params:{invitecode:u.state.dataList.bmainCustomer.invitecode,status:u.state.linkSwitch?1:0}}).then(function(e){u.getList()}).catch(function(e){r.default.error(e.statusText)})})},u.setTableStatus=function(e){u.setState({setTableStatus:e},function(){0==e&&u.getColumn()})},u.num=100,u.oCheckitem=function(e,t,a,n){var l=u.state.setTableData;l[t].data[n].isChecked=e.target.checked?1:0,l[t].data[n].sort=u.num++,u.setState({setTableData:l})},u.onSortList=function(e){u.setState({setTableData:e})},u.onSortSubmit=function(e){var t=[];e.forEach(function(e,a){t.push(e.id)}),u.setState({spinning:!0},function(){d.default.get("/hcm/hcmCustomModel/saveSort",{params:{ids:t.join(","),module:"DEALER"}}).then(function(e){"10000"==e.data.status&&(u.getColumn(),u.setTableStatus(!1)),u.setState({spinning:!1})}).catch(function(e){u.setState({spinning:!1}),r.default.error(e.statusText)})})},u.onTableCheckChange=function(e){u.setState({selectedRowKeys:e,checkAll:!1})},u.changePagination=function(e,t){u.setState({pageNo:e,pageSize:t},function(){u.getList()})},u.onPaginationSize=function(e,t){u.setState({pageNo:1,pageSize:t},function(){u.getList()})},u.checkAll=function(e){var t=u.state.selectedRowKeys;e?u.state.dataList.dealer_list.forEach(function(e,a){t.push(e.id)}):t=[],u.setState({checkAll:e,selectedRowKeys:t})},u.allStop=function(e,t){var a=u.state,n=a.selectedRowKeys,l=a.checkAll,i={};if("all"==e){var s=u.state.oldSearch,c=s.dealername,o=s.bossid,m=s.takePeople,f=s.contact,p=s.memoDealername;i={ids:n.join(","),checkAll:l,dealername:l?c:null,bossid:l?o:null,takePeople:l?m:null,contact:l?f:null,memoDealername:l?p:null}}else i.ids=t,i.checkAll=!1;u.setState({spinning:!0},function(){d.default.get("/hcm/dealer/stop",{params:i}).then(function(e){u.setState({spinning:!1,selectedRowKeys:[]},function(){r.default.success(e.data.message),"10000"==e.data.status&&(u.getColumn(),u.onSearch(!0))})}).catch(function(e){u.setState({spinning:!1}),r.default.error(e.statusText)})})},u.allRm=function(e,t){var a=u.state,n=a.selectedRowKeys,l=a.checkAll,i={};"all"==e?(i.ids=n.join(","),i.checkAll=l):(i.ids=t,i.checkAll=!1),u.setState({spinning:!0},function(){d.default.get("/hcm/dealer/delete",{params:i}).then(function(e){u.setState({spinning:!1},function(){"10000"==e.data.status&&(u.getColumn(),u.getList()),r.default.success(e.data.message)})}).catch(function(e){u.setState({spinning:!1}),r.default.error(e.statusText)})})},u.allStopConfirm=function(t,a){var n=u.state,i=n.checkAll,s=n.totalNum,c=n.selectedRowKeys;c.length||"all"!=t?l.default.confirm({title:null,maskClosable:!1,content:"all"==t?e.createElement("div",null,e.createElement("div",{className:"tips"},"提示"),e.createElement("div",{className:"pline"}),e.createElement("p",{className:"Dtitle"},"你确认要将勾选的",e.createElement("span",{className:"red"},i?s:c.length),"项客户移入解约吗？"),e.createElement("p",null,"解约后",e.createElement("span",{className:"red"},"将与客户取消合作关系"))):e.createElement("div",null,e.createElement("div",{className:"tips"},"提示"),e.createElement("div",{className:"pline"}),e.createElement("p",{className:"Dtitle"},"你确认要将该客户移入解约吗"),e.createElement("p",null,"解约后",e.createElement("span",{className:"red"},"将与客户取消合作关系"))),okText:"确定",cancelText:"取消",okButtonProps:{className:"btn2-main"},cancelButtonProps:{className:"btn2-sub"},className:"alert-item-confirm",onOk:function(){return u.allStop(t,a)}}):r.default.error("至少选择一条")},u.allRmConfirm=function(t,a){var n=u.state,i=n.checkAll,s=n.totalNum,c=n.selectedRowKeys;c.length||"all"!=t?l.default.confirm({title:null,maskClosable:!1,content:"all"==t?e.createElement("div",null,e.createElement("div",{className:"tips"},"提示"),e.createElement("div",{className:"pline"}),e.createElement("p",null,"你确认要删除勾选的",e.createElement("span",{className:"red"},i?s:c.length),"项客户信息吗"),e.createElement("p",null,"删除后",e.createElement("span",{className:"red"},"相关客户信息将无法找回"))):e.createElement("div",null,e.createElement("div",{className:"tips"},"提示"),e.createElement("div",{className:"pline"}),e.createElement("p",null,"你确认要删除该客户信息吗？"),e.createElement("p",null,"删除后",e.createElement("span",{className:"red"},"相关客户信息将无法找回"))),okText:"确定",cancelText:"取消",className:"alert-item-confirm YellowWhite",onOk:function(){return u.allRm(t,a)}}):r.default.error("至少选择一条")},u.state={pageNo:1,pageSize:10,checkAll:!1,totalNum:0,dealername:null,bossid:null,takePeople:null,contact:null,memoDealername:null,oldSearch:{dealername:null,bossid:null,takePeople:null,contact:null,memoDealername:null},spinning:!1,selectedRowKeys:[],setTableStatus:!1,addModalStatus:!1,inviteLinkStatus:!1,linkSwitch:!1,clientNames:[],dataList:{}},u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,e.Component),u(a,[{key:"componentDidMount",value:function(){this.getList(),this.getColumn()}},{key:"render",value:function(){return e.createElement(m.default,{that:this})}}]),a}();t.default=p}).call(this,a(1),a(10))}}]);