(window.webpackJsonp=window.webpackJsonp||[]).push([[107,108],{1075:function(e,t){},1076:function(e,t){},1082:function(e,t){},1083:function(e,t){},1084:function(e,t){},1085:function(e,t){},1086:function(e,t){},1090:function(e,t){},28:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var n=function(t){function n(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e.Component),a(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return e.createElement("div",{className:this.props.clazzName?this.props.clazzName:"Copyright"},"Copyright © 杭州久点网络技术有限公司")}}]),n}();t.default=n}).call(this,a(1))},29:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(a(48));a(47);var l=r(a(28));function r(e){return e&&e.__esModule?e:{default:e}}a(1075);var c=function(t){return e.createElement("div",{className:"layout-wrapper "+(t.className||"")},e.createElement("div",{className:"header-wrapper"},e.createElement(n.default,{className:"breadcrumb"},t.breadcrumbList.map(function(a,l){return""===t.linkList[l]?e.createElement(n.default.Item,{key:a},a):e.createElement(n.default.Item,{href:"javascript:;",key:a},e.createElement("span",{onClick:function(){t.history.go(-t.linkList[l])}},a))}))),e.createElement("div",{className:"layout-content"},t.children),e.createElement("div",{className:"copyright"},e.createElement(l.default,null)))};c.defaultProps={title:"标题",breadcrumbList:[],linkList:[]},t.default=c}).call(this,a(1))},548:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=_(a(14)),l=_(a(11)),r=_(a(220)),c=_(a(382)),i=_(a(91)),o=_(a(40)),u=_(a(35)),s=_(a(25)),d=_(a(57)),p=_(a(30)),f=_(a(48)),m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};a(18),a(26),a(219),a(381),a(90),a(49),a(50),a(24),a(56),a(32),a(47);var h=_(a(15)),y=_(a(29)),g=(_(a(28)),_(a(10)));function _(e){return e&&e.__esModule?e:{default:e}}f.default.Item;var v=p.default.Option,b=d.default.RangePicker,E=s.default.TextArea,w=(0,h.default)(function(t){var a=t.props.shopList,n=t.state,l=n.shop_id,r=n.campaign_name,c=n.start_time,d=n.end_time,f=n.campaign_desc;return e.createElement(i.default,{className:"shop-wrapper"},e.createElement(o.default,{className:"row"},e.createElement(u.default,{span:24},e.createElement("label",null,e.createElement("span",{className:"red"},"* "),"申请店铺：",e.createElement(p.default,{value:l,placeholder:"请选择",style:{width:"440px"},getPopupContainer:function(e){return e.parentNode},onChange:t.handleSwitchShopChange},e.createElement(v,{value:"",disabled:!0},"请选择"),a.map(function(t){return e.createElement(v,{value:t.id,key:t.id},t.shop_name,"（",t.platform_name,"）")}))))),e.createElement(o.default,{className:"row"},e.createElement(u.default,{span:24},e.createElement("label",null,e.createElement("span",{className:"red"},"* "),"活动主题：",e.createElement(s.default,{placeholder:"请输入",value:r,style:{width:"440px"},onChange:function(e){return t.handleInputChange({flag:!0,key:"campaign_name",event:e})}})))),e.createElement(o.default,{className:"row"},e.createElement(u.default,{span:24,id:"timeSelect"},e.createElement("label",null,e.createElement("span",{className:"red"},"* "),"活动时间：",e.createElement(b,{defaultValue:[(0,g.default)(),(0,g.default)()],getCalendarContainer:function(e){return document.getElementById("timeSelect")},disabledDate:function(e){return e&&e<(0,g.default)().subtract(1,"d").endOf("day")},showTime:{minuteStep:30},value:[(0,g.default)(c),(0,g.default)(d)],format:"YYYY-MM-DD HH:mm",placeholder:["请选择","请选择"],style:{width:"440px"},onChange:t.handleSwitchDateChange})))),e.createElement(o.default,{className:"row",style:{marginLeft:"10px"}},e.createElement(u.default,{span:24},e.createElement("label",null,"活动说明：",e.createElement(E,{autosize:{minRows:2,maxRows:6},placeholder:"请输入",value:f,style:{width:"440px"},onChange:function(e){t.handleInputChange({flag:!0,key:"campaign_desc",event:e})}})))))}),N=(0,h.default)(function(t){var a=t.props,d=a.productList,p=(a.shopList,t.state.addActivityProductList),f=0!==d.length?d.map(function(e){var t={productName:e.productClassifyName};return e.children||(t.disabled=!0),Object.assign({},e,m({},t))}):[],h={width:"300px"};return e.createElement(y.default,{breadcrumbList:["活动信息","活动申报"],linkList:["",""]},e.createElement("div",{className:"activity-declaration-wrapper"},e.createElement("section",{className:"content"},e.createElement(w,{that:t}),0!==p.length?p.map(function(a,n){return function(a,n){return e.createElement(i.default,{className:"product-wrapper",key:n},e.createElement("div",{className:"top",id:"proSelect"},e.createElement("label",null,e.createElement("span",{className:"red"},"* "),"产品信息：",e.createElement(c.default,{options:f,getPopupContainer:function(e){return document.getElementById("proSelect")},fieldNames:{label:"productName",value:"id"},placeholder:"请选择/请选择",style:{minWidth:"300px"},value:a.product_id||[],onChange:function(e,a){t.handleSwitchProductChange(n,e,a)},showSearch:!0})),e.createElement("span",{onClick:function(){t.handleDeleteProduct(n)}},"删除")),0!==Object.keys(a.prices_map).length?e.createElement("div",{className:"middle"},e.createElement(o.default,{className:"row"},Object.entries(a.prices_map).map(function(t){return e.createElement(u.default,{key:t[0],span:8},t[0]+"："+t[1])}))):""===a.prices_map?null:e.createElement("div",{style:{marginTop:"20px"}},"暂无参考价格"),e.createElement("div",{className:"bottom"},e.createElement(o.default,{className:"row"},e.createElement(u.default,{span:8,className:"col"},e.createElement("label",null,e.createElement("span",{className:"red"},"* "),"商品链接",e.createElement("br",null),e.createElement(s.default,{placeholder:"请输入",value:a.product_url||"",style:h,onChange:function(e){return t.handleInputChange({key:"product_url",index:n,event:e})}}))),e.createElement(u.default,{span:8,className:"col"},e.createElement("label",null,e.createElement("span",{className:"red"},"* "),"申请标价",e.createElement("br",null),e.createElement(r.default,{min:0,placeholder:"请输入",style:h,value:a.apply_price||"",onChange:function(e){t.handleInputChange({key:"apply_price",event:e,index:n})}}))),e.createElement(u.default,{span:8,className:"col"},e.createElement("label",null,e.createElement("span",{className:"red"},"* "),"实际成交价",e.createElement("br",null),e.createElement(r.default,{min:0,placeholder:"请输入",style:h,value:a.actual_price||"",onChange:function(e){t.handleInputChange({key:"actual_price",event:e,index:n})}})))),e.createElement(o.default,{className:"row"},e.createElement(u.default,{span:8,className:"col"},e.createElement("label",null,e.createElement("span",{className:"red"},"* "),"活动类型",e.createElement("br",null),e.createElement(s.default,{placeholder:"请输入",style:h,value:a.campaign_type||"",onChange:function(e){t.handleInputChange({key:"campaign_type",event:e,index:n})}}))),e.createElement(u.default,{span:8,className:"col"},e.createElement("label",null,e.createElement("span",{className:"red"},"* "),"赠品情况",e.createElement("br",null),e.createElement(s.default,{placeholder:"请输入",style:h,value:a.gift_situation||"",onChange:function(e){t.handleInputChange({key:"gift_situation",event:e,index:n})}}))),e.createElement(u.default,{span:8,className:"col"},e.createElement("label",null,e.createElement("span",{className:"red"},"* "),"玩法说明",e.createElement("br",null),e.createElement(s.default,{placeholder:"请输入",style:h,value:a.play_content||"",onChange:function(e){t.handleInputChange({key:"play_content",event:e,index:n})}}))))))}(a,n)}):null,e.createElement("div",{className:"addNew",onClick:function(){t.handleAddClick(p.length)}},e.createElement(l.default,{type:"plus"})," ",e.createElement("span",null,"新增")),e.createElement("div",{className:"submit-wrapper"},e.createElement(n.default,{type:"primary",className:"submit btn2-main",onClick:t.handleSubmit},"提交"),e.createElement(n.default,{className:"btn2-sub",onClick:t.handleClearForm},"取消")))))});t.default=N}).call(this,a(1))},714:function(e,t){},818:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n,l=f(a(19)),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(20);var o=a(128),u=a(387),s=f(a(548)),d=f(a(13)),p=f(a(69));function f(e){return e&&e.__esModule?e:{default:e}}function m(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}var h=(0,o.connect)(function(e){return{shopList:e.dealer.shopList,productList:e.dealer.productList}})(n=function(t){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.checkInputLength=function(e){var t={product_url:{label:"商品链接",type:"URL"},campaign_type:{label:"活动类型",type:"INPUT"},gift_situation:{label:"赠品情况",type:"TEXTAREA"},play_content:{label:"玩法说明",type:"TEXTAREA"}};if(e.length){var a=e.map(function(e,a){return Object.keys(e).map(function(n){if(t[n]&&!p.default.legnthCheck(e[n],t[n].type))return"请把"+(a+1)+"号产品的"+t[n].label+"限制在"+p.default.LENGTH[t[n].type]+"字符内！"})}).reduce(function(e,t){return e.concat(t)},[]).filter(function(e){return void 0!==e});return!a.length||(a.forEach(function(e){return l.default.warning(e)}),!1)}return l.default.warning("请至少添加一个活动产品！"),!1},t.handleSubmit=function(e){var a=t.state,n=a.shop_id,r=a.campaign_name,c=a.start_time,i=a.end_time,o=a.campaign_desc,u=a.addActivityProductList;if(""!==n)if(""!==r)if(c!==i)if(t.checkInputValue(u))if(p.default.legnthCheck(r,"INPUT"))if(!o||p.default.legnthCheck(o,"TEXTAREA")){if(t.checkInputLength(u)){var s=t.props.shopList.filter(function(e){return e.id===n})[0].shop_name,f=u.slice(),m={shop_id:n,shop_name:s,campaign_name:r,start_time:c,end_time:i,campaign_desc:o,cplist:f.map(function(e){var t=e.product_id[1];return Object.assign({},e,{product_id:t})})};LoadingModal({bl:!0}),(0,d.default)({method:"post",url:"/hcm/campgign/Apply",transformRequest:[function(e,t){return e}],headers:{"Content-Type":"application/json;charset=utf-8"},data:JSON.stringify(m)}).then(function(e){LoadingModal({bl:!1});var a=e.data,n=(a.data,a.status),r=a.message;"10000"===n?(l.default.success(r),t.handleClearForm()):l.default.error(r)}).catch(function(e){LoadingModal({bl:!1}),l.default.error("网络繁忙，请稍后再试！")})}}else l.default.warning("请把活动说明限制在"+p.default.LENGTH.TEXTAREA+"字符内！");else l.default.warning("请把活动主题限制在"+p.default.LENGTH.INPUT+"字符内！");else l.default.warning("请完善活动产品信息！");else l.default.warning("请选择活动时间！");else l.default.warning("请输入活动主题！");else l.default.warning("请选择店铺！")},t.handleSelectBeforeChange=function(e,a){var n=t.state.addActivityProductList.slice();t.setState({addActivityProductList:n})},t.handleClearForm=function(){t.setState({shop_id:"",campaign_name:"",start_time:Date.now(),end_time:Date.now(),campaign_desc:"",addActivityProductList:[{product_id:"",product_url:"",apply_price:"",actual_price:"",campaign_type:"",gift_situation:"",play_content:"",prices_map:""}]})},t.handleDeleteProduct=function(e){console.log(e);var a=t.state.addActivityProductList,n=[].concat(m(a));n.splice(e,1),t.setState({addActivityProductList:n})},t.handleSwitchDateChange=function(e){console.log(e),t.setState({start_time:0===e.length?Date.now():e[0].valueOf(),end_time:0===e.length?Date.now():e[1].valueOf()})},t.handleSwitchShopChange=function(e){t.setState({shop_id:e})},t.handleSwitchProductChange=function(e,a,n){var l=t.state.addActivityProductList.slice();l[e].product_id=a,t.setState({addActivityProductList:l}),2===a.length&&t.getProductPrices(a[1],e)},t.handleInputChange=function(e){var a=e.flag,n=e.key,l=e.event,i=e.index,o=void 0===i?0:i;if(a)t.setState(function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}({},n,l.target.value));else{var u=[].concat(m(t.state.addActivityProductList)),s=c({},u[o]);s[n]="object"===(void 0===l?"undefined":r(l))?l.target.value:l,u[o]=s,t.setState({addActivityProductList:u})}},t.getProductPrices=function(e,a){(0,d.default)({method:"post",url:"/hcm/campgign/productPrice",data:{product_id:e}}).then(function(e){var n=e.data,l=n.data,r=n.status,c=(n.message,t.state.addActivityProductList.slice());c[a].prices_map=l,"10000"===r&&t.setState({addActivityProductList:c})}).catch()},t.checkInputValue=function(e){return e.map(function(e){return Object.keys(e).every(function(t){return""!==e[t]&&!!e.apply_price&&!!e.actual_price})}).every(function(e){return!0===e})},t.handleAddClick=function(e){var a=t.state,n=a.addActivityProductList;a.shop_id,a.campaign_name,a.start_time,a.end_time;n.push({product_id:"",product_url:"",apply_price:"",actual_price:"",campaign_type:"",gift_situation:"",play_content:"",prices_map:""}),t.setState({addActivityProductList:n})},t.state={addActivityProductList:[{product_id:"",product_url:"",apply_price:"",actual_price:"",campaign_type:"",gift_situation:"",play_content:"",prices_map:""}],shop_id:"",campaign_name:"",start_time:Date.now(),end_time:Date.now(),campaign_desc:""},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,e.Component),i(a,[{key:"componentWillMount",value:function(){var e=this.props.dispatch;e((0,u.getShopList)()),e((0,u.getProductList)())}},{key:"render",value:function(){return e.createElement(s.default,{that:this})}}]),a}())||n;t.default=h}).call(this,a(1))}}]);