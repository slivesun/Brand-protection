(window.webpackJsonp=window.webpackJsonp||[]).push([[91],{1075:function(e,t){},1076:function(e,t){},28:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var n=function(t){function n(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e.Component),a(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return e.createElement("div",{className:this.props.clazzName?this.props.clazzName:"Copyright"},"Copyright © 杭州久点网络技术有限公司")}}]),n}();t.default=n}).call(this,a(1))},29:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=l(a(48));a(47);var r=l(a(28));function l(e){return e&&e.__esModule?e:{default:e}}a(1075);var i=function(t){return e.createElement("div",{className:"layout-wrapper "+(t.className||"")},e.createElement("div",{className:"header-wrapper"},e.createElement(n.default,{className:"breadcrumb"},t.breadcrumbList.map(function(a,r){return""===t.linkList[r]?e.createElement(n.default.Item,{key:a},a):e.createElement(n.default.Item,{href:"javascript:;",key:a},e.createElement("span",{onClick:function(){t.history.go(-t.linkList[r])}},a))}))),e.createElement("div",{className:"layout-content"},t.children),e.createElement("div",{className:"copyright"},e.createElement(r.default,null)))};i.defaultProps={title:"标题",breadcrumbList:[],linkList:[]},t.default=i}).call(this,a(1))},808:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=s(a(14)),r=s(a(19)),l=s(a(25)),i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(18),a(20),a(24);var c=s(a(13)),o=s(a(69)),u=s(a(29));function s(e){return e&&e.__esModule?e:{default:e}}function d(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}l.default.TextArea;var f=function(t){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));t.getByProduct=function(){c.default.get("/hcm/hcmCustomModel/getByProduct",{params:{productClassifyid:t.state.id}}).then(function(e){var a=e.data.data;t.setState({formatColumn:a})}).catch(function(e){r.default.error(e.statusText)})};var n=t.props.match.params,l=n.id,i=n.name,o=n.status,u=n.type,s=n.itemid;return t.state={id:l,name:i,status:o,type:u,itemid:s,formatColumn:{},product_classify_id:null,bmcid:1,product_name:null,brand_name:null,addField:{}},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,e.Component),i(a,[{key:"componentWillMount",value:function(){var e=this.props.match.params.type;this.getByProduct(),"add"==e||this.getInfo()}},{key:"getInfo",value:function(){var e=this,t=this.props.match.params.itemid;c.default.get("/hcm/hcmProduct/getById",{params:{id:t}}).then(function(t){var a=t.data.data,n=a.product_classify_id,r=a.bmcid,l=a.product_name,i=a.brand_name,c=function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}(a,["product_classify_id","bmcid","product_name","brand_name"]);e.setState({product_classify_id:n,bmcid:r,product_name:l,brand_name:i,addField:c})}).catch(function(e){r.default.error(e.statusText)})}},{key:"fixedIptChange",value:function(e,t){var a=this.state;a[t]=e.target.value,this.setState(a)}},{key:"iptChange",value:function(e,t){if("PRICE"!=t.fieldClassify||!isNaN(+e.target.value)){var a=this.state.addField;a[t.fieldvalue]=e.target.value,this.setState({addField:a})}}},{key:"onSubmit",value:function(){var e=this,t=this.state,a=t.id,n=t.name,l=t.itemid,i=t.type,u=(t.product_classify_id,t.bmcid),s=t.product_name,f=t.brand_name,m=t.addField,p=t.formatColumn;if(f&&f.trim().length)if(s&&s.trim().length)if(o.default.legnthCheck(f.trim(),"INPUT"))if(o.default.legnthCheck(s.trim(),"INPUT")){var h=p.memo,v=p.price,y=p.product,b=[].concat(d(h.data),d(v.data),d(y.data));for(var _ in m){var g=b.filter(function(e){return e.fieldvalue==_});if("MEMO"==g[0].fieldClassify&&!o.default.legnthCheck(m[_],"URL"))return void r.default.error("备注信息字符长度不能超过500");if("PRICE"==g[0].fieldClassify&&!o.default.legnthCheck(m[_],"INPUT"))return void r.default.error("价格信息字符长度不能超过50");if("PRODUCT"==g[0].fieldClassify&&!o.default.legnthCheck(m[_],"INPUT"))return void r.default.error("产品信息字符长度不能超过50")}LoadingModal({bl:!0,text:"保存中,请稍后..."}),c.default.get("/hcm/hcmProduct/save",{params:{bmcid:u,productClassifyId:a,brandName:f,productName:s,addField:m,id:"add"==i?null:l}}).then(function(t){"10000"==t.data.status?(r.default.success(t.data.message),"add"==i?e.setState({product_name:null,brand_name:null,addField:{}}):window.location.href="/index.html#/ProductInfo/"+a+"/"+n):r.default.warning(t.data.message),LoadingModal({bl:!1})}).catch(function(e){LoadingModal({bl:!1}),r.default.error(e.statusText)})}else r.default.error("产品信息字符长度不能超过50");else r.default.error("产品信息字符长度不能超过50");else r.default.error("品名不可为空");else r.default.error("品牌不可为空")}},{key:"render",value:function(){var t=this,a=this.state,r=a.id,i=a.name,c=(a.status,a.type),o=(a.itemid,a.product_classify_id,a.bmcid,a.product_name),s=a.brand_name,d=a.addField,f=a.formatColumn,m=f.memo,p=f.price,h=f.product,v=h?h.data.filter(function(e,t){return"product_name"==e.fieldvalue}):null;return e.createElement(u.default,{breadcrumbList:["售价公示",i,"add"==c?"新增公示信息":"编辑公示信息"],linkList:["2","1",""],history:this.props.history},e.createElement("div",{className:"ActionPriceInfo"},e.createElement("div",{className:"content"},e.createElement("div",{className:"box"},e.createElement("h4",null,"产品信息"),e.createElement("div",{className:"items"},e.createElement("div",{className:"item"},e.createElement("span",{className:"text red"},"品牌"),e.createElement(l.default,{placeholder:"请输入",onChange:function(e){return t.fixedIptChange(e,"brand_name")},value:s,className:"input"})),e.createElement("div",{className:"item"},e.createElement("span",{className:"text red"},v?v[0].fieldname:"品名"),e.createElement(l.default,{placeholder:"请输入",onChange:function(e){return t.fixedIptChange(e,"product_name")},value:o,className:"input"})),h?h.data.map(function(a,n){if("brand_name"!==a.fieldvalue&&"product_name"!==a.fieldvalue)return e.createElement("div",{key:n,className:"item"},e.createElement("span",{className:"text"},a.fieldname),e.createElement(l.default,{placeholder:"请输入",onChange:function(e){return t.iptChange(e,a)},value:d[a.fieldvalue],className:"input"}))}):null),e.createElement("h4",null,"价格信息"),e.createElement("div",{className:"items"},p?p.data.map(function(a,n){return e.createElement("div",{key:n,className:"item"},e.createElement("span",{className:"text"},a.fieldname),e.createElement(l.default,{placeholder:"请输入",onChange:function(e){return t.iptChange(e,a)},value:d[a.fieldvalue],className:"input"}))}):null),e.createElement("h4",null,"备注信息"),e.createElement("div",{className:"items"},m?m.data.map(function(a,n){return e.createElement("div",{key:n,className:"item"},e.createElement("span",{className:"text"},a.fieldname),e.createElement(l.default,{placeholder:"请输入",onChange:function(e){return t.iptChange(e,a)},value:d[a.fieldvalue],className:"input"}))}):null),e.createElement("div",{className:"items"},e.createElement("div",{className:"item"},e.createElement("span",{className:"text"}),e.createElement(n.default,{className:"btn2-main",onClick:function(){return t.onSubmit()},style:{marginLeft:"20px"}},"确认"),e.createElement("a",{href:"/index.html#/ProductInfo/"+r+"/"+i},e.createElement(n.default,{className:"btn2-sub noneFloat"},"取消"))))))))}}]),a}();t.default=f}).call(this,a(1))}}]);