(window.webpackJsonp=window.webpackJsonp||[]).push([[93],{1089:function(e,t){},809:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n,i,l=f(a(126)),o=f(a(127)),c=f(a(101)),r=f(a(19)),s=f(a(38)),u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(167),a(166),a(102),a(20),a(37);var d=f(a(600)),m=f(a(13));function f(e){return e&&e.__esModule?e:{default:e}}var p=s.default.confirm,h=(n=function(t){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));i.call(t);var n=t.props.match.params,l=n.id,o=n.name;return t.state={id:l,name:o,fileList:[],percent:null,uploading:!1,uploadVisible:!1,formatColumn:[],selectedRowKeys:[],addStatus:!1,visible:!1,dataList:[],setTableVisible:!1,brandName:null,productName:null,oldSearch:{brandName:null,productName:null},pageNo:1,pageSize:10,checkAll:!1,totalElements:null},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,e.Component),u(a,[{key:"componentDidMount",value:function(){this.getList(),this.getByProduct();var e=this.state.id;m.default.get("/hcm/productread/create",{params:{classifyId:e}})}},{key:"render",value:function(){return e.createElement(d.default,{that:this})}}]),a}(),i=function(){var t=this;this.onSearch=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t.setState({pageNo:1,brandName:e?null:t.state.brandName,productName:e?null:t.state.productName,oldSearch:{brandName:e?null:t.state.brandName,productName:e?null:t.state.productName}},function(){t.getList()})},this.onTableCheckChange=function(e){t.setState({selectedRowKeys:e,checkAll:!1})},this.changePagination=function(e,a){t.setState({pageNo:e,pageSize:a},function(){t.getList()})},this.onPaginationSize=function(e,a){t.setState({pageNo:1,pageSize:a},function(){t.getList()})},this.onChange=function(e,a){var n=t.state;n[a]=e.target.value,t.setState(n)},this.handleClearIconClick=function(e){var a=t.state;a[e]=null,t.setState(a)},this.getList=function(){var e=t.state,a=e.pageNo,n=e.pageSize,i=e.brandName,l=e.productName,o=(e.totalNum,e.id);m.default.get("/hcm/hcmProduct/getPageBybmcid",{params:{brandName:i,productName:l,classifyid:o,pageNo:a,pageSize:n}}).then(function(e){var a=e.data.data,n=a.content,i=a.pageNumber,l=a.pageSize,o=a.totalElements,c=a.obj;t.setState({selectedRowKeys:[],setTableVisible:1!=c,dataList:n,pageNumber:i,pageSize:l,totalElements:o})}).catch(function(e){r.default.error(e.statusText)})},this.rmAll=function(){var a=t,n=t.state,i=n.checkAll,l=n.selectedRowKeys,o=n.id,c=n.totalElements,s=t.state.oldSearch,u=s.brandName,d=s.productName;0!=l.length?p({title:null,content:e.createElement("div",null,e.createElement("div",{className:"tips"},"提示"),e.createElement("div",{className:"pline"}),e.createElement("p",{className:"Dtitle"},"你确认要删除勾选的",i?c:l.length,"项公示信息吗？"),e.createElement("p",null,"删除后",e.createElement("span",{className:"red"},"相关公示信息将无法找回"))),okText:"确定",cancelText:"取消",okButtonProps:{className:"btn2-main"},cancelButtonProps:{className:"btn2-sub"},className:"alert-item-confirm",onOk:function(){m.default.get("/hcm/hcmProduct/delete",{params:{classifyId:o,hcmProductIds:i?"checkAll":l.join(","),brandName:i?u:"",productName:i?d:""}}).then(function(e){r.default.success(e.data.message),a.onSearch(!0)}).catch(function(e){r.default.error(e.statusText)})}}):r.default.error("至少选择一条")},this.rmItem=function(a){var n=t.state.id,i=t;p({title:null,content:e.createElement("div",null,e.createElement("div",{className:"tips"},"提示"),e.createElement("div",{className:"pline"}),e.createElement("p",{className:"Dtitle"},"你确认要删除该公示信息吗？"),e.createElement("p",null,"删除后",e.createElement("span",{className:"red"},"相关公示信息将无法找回"))),okText:"确定",cancelText:"取消",okButtonProps:{className:"btn2-main"},cancelButtonProps:{className:"btn2-sub"},className:"alert-item-confirm",onOk:function(){m.default.get("/hcm/hcmProduct/delete",{params:{classifyId:n,hcmProductIds:a.id}}).then(function(e){r.default.success(e.data.message),i.getList()}).catch(function(e){r.default.error(e.statusText)})}})},this.getByProduct=function(){m.default.get("/hcm/hcmCustomModel/getByProduct",{params:{productClassifyid:t.state.id}}).then(function(e){var a=e.data.data;t.setState({formatColumn:t.formAtDom(a)})}).catch(function(e){r.default.error(e.statusText)})},this.formAtDom=function(a){var n=t.state,i=n.name,r=n.id,s=n.setTableVisible,u=[{title:"序号",dataIndex:"index",fixed:"left",sort:0,width:80,key:"index",render:function(e,t,a){return a+1}}],d=function(e){a[e].data.forEach(function(t,a){if(t.isChecked)return t.target=[e,a,t],u.push({title:t.fieldname,dataIndex:t.fieldvalue,key:t.id,sort:t.sort,className:"item-column",render:function(e,t,a){return e||"--"}})})};for(var m in a)d(m);return u.push({title:"操作",dataIndex:"action",key:"action",sort:999999,width:180,align:"center",fixed:"right",render:function(a,n,u){return e.createElement("div",null,e.createElement("a",{href:"index.html#/ActionPriceInfo/"+r+"/"+s+"/"+i+"/edit/"+n.id},e.createElement("img",{style:{verticalAlign:"text-bottom",paddingRight:"6px"},src:"../../../img/icon/icon_operating_edit.png"}),"编辑"),e.createElement(c.default,{type:"vertical"}),e.createElement(l.default,{overlay:e.createElement(o.default,null,e.createElement(o.default.Item,null,e.createElement("a",{className:"A-COLOR",onClick:function(){return t.rmItem(n)}},e.createElement("img",{style:{verticalAlign:"text-bottom",paddingRight:"6px"},src:"../../../img/icon/icon_operating_del.png"}),"删除")),e.createElement(o.default.Item,null,e.createElement("a",{className:"A-COLOR",onClick:function(){return t.ChangeHis(n)}},e.createElement("img",{style:{verticalAlign:"text-bottom",paddingRight:"4px"},src:"../../../img/icon/icon_operating_history.png"}),"变更历史")))},e.createElement("a",null,"···  更多")))}}),u},this.ChangeHis=function(e){window.location="/index.html#/ChangeHistorys/Product/"+e.brand_name+"/"+e.id},this.ProduHistory=function(){window.location="/index.html#/ChangeHistory/HcmCustomModel/"+t.props.match.params.id+"/TYpe"},this.checkAll=function(e){var a=t.state.selectedRowKeys;e?t.state.dataList.forEach(function(e,t){a.push(e.id)}):a=[],t.setState({checkAll:e,selectedRowKeys:a})},this.handleUpload=function(){var e=t.state,a=e.fileList,n=e.id,i=new FormData;a.forEach(function(e){i.append("file",e),i.append("classifyId",n)}),t.setState({uploading:!0}),(0,m.default)({method:"post",url:"/hcm/hcmProduct/readExcelFile",headers:{"Content-Type":"multipart/form-data"},data:i,onUploadProgress:function(e){var a=Math.round(100*e.loaded/e.total);t.setState({percent:a})}}).then(function(e){t.setState({fileList:[],uploading:!1,uploadVisible:!1}),t.getList(),"10000"==e.data.status?r.default.success(e.data.message):r.default.warning(e.data.message)}).catch(function(){t.setState({uploading:!1}),r.default.error("upload failed.")})},this.propsUpload=function(){return{action:"/hcm/hcmProduct/readExcelFile",accept:"application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",onRemove:function(e){t.setState(function(t){var a=t.fileList,n=a.indexOf(e),i=a.slice();return i.splice(n,1),{fileList:i}})},beforeUpload:function(e){return t.setState(function(){return{fileList:[e]}}),!1},fileList:t.state.fileList}},this.onuploadVisible=function(e){t.setState({uploadVisible:e,fileList:[],uploading:!1,percent:null})},this.onShowSetTable=function(e,a){"getlist"==a&&(t.getByProduct(),t.onSearch()),t.setState({setTableVisible:e})}},n);t.default=h}).call(this,a(1))}}]);