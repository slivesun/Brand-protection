(window.webpackJsonp=window.webpackJsonp||[]).push([[183,184],{1075:function(e,t){},1076:function(e,t){},1085:function(e,t){},1086:function(e,t){},28:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var n=function(t){function n(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e.Component),a(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return e.createElement("div",{className:this.props.clazzName?this.props.clazzName:"Copyright"},"Copyright © 杭州久点网络技术有限公司")}}]),n}();t.default=n}).call(this,a(1))},29:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=l(a(48));a(47);var r=l(a(28));function l(e){return e&&e.__esModule?e:{default:e}}a(1075);var i=function(t){return e.createElement("div",{className:"layout-wrapper "+(t.className||"")},e.createElement("div",{className:"header-wrapper"},e.createElement(n.default,{className:"breadcrumb"},t.breadcrumbList.map(function(a,r){return""===t.linkList[r]?e.createElement(n.default.Item,{key:a},a):e.createElement(n.default.Item,{href:"javascript:;",key:a},e.createElement("span",{onClick:function(){t.history.go(-t.linkList[r])}},a))}))),e.createElement("div",{className:"layout-content"},t.children),e.createElement("div",{className:"copyright"},e.createElement(r.default,null)))};i.defaultProps={title:"标题",breadcrumbList:[],linkList:[]},t.default=i}).call(this,a(1))},584:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=d(a(91)),r=d(a(40)),l=d(a(382)),i=d(a(35)),o=d(a(11)),c=d(a(25));a(90),a(49),a(381),a(50),a(26),a(24);var s=d(a(15)),u=d(a(29));function d(e){return e&&e.__esModule?e:{default:e}}var p=(0,s.default)(function(t){var a=t.state,s=a.reportList,d=a.alreadyReportList,p=a.complatinAccountList,f=a.platform;return e.createElement(u.default,{className:"set-complaint-report-wrapper",linkList:["",1,""],history:t.props.history,breadcrumbList:["维权报表",("taobao"===f?"淘宝":"1688")+"维权报表","设置报表"]},e.createElement("section",{className:"add-report",onClick:t.handleAddReport},e.createElement(o.default,{type:"plus"}),e.createElement("span",null,"新增投诉报表")),e.createElement("section",{className:"main-wrapper"},s.map(function(a,s){return e.createElement(n.default,{title:function(a,n){return e.createElement("div",{className:"card-title"},e.createElement("div",null,"报表名称：",e.createElement(c.default,{value:a.name,onChange:t.handleInputChange.bind(t,n),style:{width:"440px"},placeholder:"请输入"})),e.createElement("div",{className:"operation"},e.createElement("span",{onClick:t.handleSaveReport.bind(t,a,n)},"保存"),e.createElement("span",{onClick:t.handleDeleteReport.bind(t,n)},"取消")))}(a,s),key:a.id},e.createElement(r.default,null,e.createElement(i.default,{span:2},e.createElement("span",null,"知识产权：")),e.createElement(i.default,{span:22},a.list.map(function(a,n){return e.createElement("div",{key:a+n,className:"knowledgeright-item"},e.createElement(l.default,{getPopupContainer:function(e){return e.parentNode},style:{width:"440px"},onChange:t.handleCascaderChange.bind(t,s,n,"add"),value:a,options:p,loadData:t.handleLoadData,placeholder:"请选择"}),"   ",e.createElement(o.default,{type:"minus-circle",style:{cursor:"pointer"},onClick:t.handleDeleteKnowledgeRight.bind(t,s,n)}))}),e.createElement("div",{className:"add-knowledge-right",onClick:t.handleAddKnowledgeRight.bind(t,s)},e.createElement(o.default,{type:"plus"}),e.createElement("span",null,"添加知识产权")))))})),e.createElement("section",{className:"report-list"},d.map(function(a,s){return e.createElement(n.default,{title:function(a,n){return e.createElement("div",{className:"card-title"},e.createElement("div",null,"报表名称：",a._isEdit?e.createElement(c.default,{value:a.report_name,onChange:t.handleEditInputChange.bind(t,n),style:{width:"440px"},placeholder:"请输入"}):a.report_name),e.createElement("div",{className:"operation"},a._isEdit?e.createElement("span",{onClick:t.handleSaveReport.bind(t,a,n)},"提交"):e.createElement("span",{onClick:t.handleEdit.bind(t,n,!0)},"编辑"),a._isEdit?e.createElement("span",{onClick:t.handleEdit.bind(t,n,!1)},"取消"):e.createElement("span",{onClick:t.handleDeleteAlreadyComplaintReport.bind(t,a.report_id)},"删除")))}(a,s),key:a.report_id},e.createElement(r.default,null,e.createElement(i.default,{span:2},e.createElement("span",null,"知识产权：")),e.createElement(i.default,{span:22},a.complaintModelList.map(function(n,r){return e.createElement("div",{key:n.account_id+r,className:"knowledgeright-item"},a._isEdit?e.createElement(e.Fragment,null,e.createElement(l.default,{getPopupContainer:function(e){return e.parentNode},style:{width:"440px"},onChange:t.handleCascaderChange.bind(t,s,r,"edit"),defaultValue:[n.account_id,n.ipr_id],options:p,loadData:t.handleLoadData,placeholder:"请选择"}),"   ",e.createElement(o.default,{type:"minus-circle",style:{cursor:"pointer"},onClick:t.handleDeleteAlreadyKnowledge.bind(t,s,r)})):e.createElement("p",null,n.account_id+" / "+n.ipr_name))}))))})))});t.default=p}).call(this,a(1))},714:function(e,t){},858:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=o(a(19)),r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(20);var l=o(a(584)),i=o(a(13));function o(e){return e&&e.__esModule?e:{default:e}}var c=function(t){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.getComplaintAccount=function(){i.default.post("/hcm/complaiont/getListByBmcid",{platform:"ALIBABA"}).then(function(e){var a=e.data,n=a.data;a.message;"10000"===a.status&&t.setState({complatinAccountList:n.map(function(e){return Object.assign({},e,{isLeaf:!1,label:e.username,value:e.username})})})}).catch(function(e){n.default.error("系统繁忙，请稍后再试！")})},t.getIprType=function(e,a){t.state.platform;var r,l={};r="/hcm/complaint/get1688iprType",l.account_id=e,i.default.post(r,l).then(function(e){var t=e.data,r=t.data.data,l=t.status,i=t.message;"10000"===l?a(r):n.default.error(i)}).catch(function(e){n.default.error("系统繁忙，请稍后再试！")})},t.handleLoadData=function(e){t.state.platform;var a=e[e.length-1];a.loading=!0,t.getIprType(a.username,function(e){a.loading=!1;var n=e.map(function(e){return Object.assign({},e,{label:e.name,value:e.number})});a.children=n,t.setState({complatinAccountList:[].concat(function(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}(t.state.complatinAccountList))})})},t.handleDeleteAlreadyKnowledge=function(e,a){var r=JSON.parse(JSON.stringify(t.state.alreadyReportList)),l=r[e].complaintModelList;1!==l.length?(l.splice(a,1),r[e].complaintModelList=l,t.setState({alreadyReportList:r})):n.default.warning("至少保留一条数据！")},t.handleEdit=function(e,a){var n=JSON.parse(JSON.stringify(t.state.alreadyReportList));n[e]._isEdit=a,t.setState({alreadyReportList:n})},t.handleEditInputChange=function(e,a){var r=t.state.alreadyReportList.slice();a.target.value.length>30?n.default.warning("请输入30个字符以内！"):(r[e]=Object.assign({},r[e],{report_name:a.target.value}),t.setState({alreadyReportList:r}))},t.getAlreadyReportList=function(){LoadingModal({bl:!0}),i.default.post("/hcm/complaint/report_list",{type:t.state.platform}).then(function(e){LoadingModal({bl:!1});var a=e.data,r=a.data,l=a.status,i=a.message;"10000"===l?t.setState({alreadyReportList:r.map(function(e){return Object.assign({},e,{_isEdit:!1})})}):n.default.error(i)}).catch(function(e){LoadingModal({bl:!1}),n.default.error("系统繁忙，请稍后再试！")})},t.handleDeleteAlreadyComplaintReport=function(e){LoadingModal({bl:!0}),i.default.post("/hcm/complaint/report_del",{report_id:e}).then(function(e){LoadingModal({bl:!1});var a=e.data,r=(a.data,a.status),l=a.message;"10000"===r?(n.default.success(l),t.getAlreadyReportList()):n.default.error(l)}).catch(function(e){LoadingModal({bl:!1}),n.default.error("系统繁忙，请稍后再试！")})},t.handleSaveReport=function(e,a){var r=t.state,l=r.platform,o=r.alreadyReportList;if(""!==e.name&&""!==e.report_name)if(e.report_id){if(1!==(o.length?o.filter(function(t){return e.report_name===t.report_name}):[]).length)return void n.default.warning("报表名称重复请修改！");LoadingModal({bl:!0}),(0,i.default)({method:"post",url:"/hcm/complaint/report_update",transformRequest:[function(e,t){return e}],headers:{"Content-Type":"application/json;charset=utf-8"},data:JSON.stringify({complaintModelList:e.complaintModelList,type:e.type,report_name:e.report_name,report_id:e.report_id})}).then(function(e){LoadingModal({bl:!1});var a=e.data,r=a.status,l=(a.data,a.message);"10000"===r?(n.default.success(l),t.getAlreadyReportList()):n.default.error(l)}).catch(function(e){LoadingModal({bl:!1}),n.default.error("系统繁忙，请稍后再试！")})}else{if(0===e.info.length)return void n.default.warning("请至少添加一个知识产权！");var c=e.info.map(function(e){return{account_id:e[0].label,ipr_name:e[1].label,ipr_id:e[1].value}});LoadingModal({bl:!0}),(0,i.default)({method:"post",url:"/hcm/complaint/report_save",transformRequest:[function(e,t){return e}],headers:{"Content-Type":"application/json;charset=utf-8"},data:JSON.stringify({complaintModelList:c,type:l,report_name:e.name})}).then(function(e){LoadingModal({bl:!1});var r=e.data,l=(r.data,r.status),i=r.message;"10000"===l?(n.default.success(i),t.getAlreadyReportList(),1===t.state.reportList.length?t.setState({reportList:[{id:0,name:"",list:[""],info:[]}]}):t.handleDeleteReport(a)):n.default.error(i)}).catch(function(e){LoadingModal({bl:!1}),n.default.error("系统繁忙，请稍后再试！")})}else n.default.warning("请填写报表名称！")},t.handleInputChange=function(e,a){var r=t.state.reportList.slice();a.target.value.length>30?n.default.warning("请输入30个字符以内！"):(r[e]=Object.assign({},r[e],{name:a.target.value}),t.setState({reportList:r}))},t.handleAddReport=function(){var e=JSON.parse(JSON.stringify(t.state.reportList));e.length?e.push({id:e[e.length-1].id+1,name:"",list:[""],info:[]}):e.push({id:0,name:"",list:[""],info:[]}),t.setState({reportList:e})},t.handleDeleteReport=function(e){var a=JSON.parse(JSON.stringify(t.state.reportList));a.splice(e,1),t.setState({reportList:a})},t.handleDeleteKnowledgeRight=function(e,a){var r=JSON.parse(JSON.stringify(t.state.reportList)),l=r[e].list;1!==l.length?(l.splice(a,1),r[e].list=l,t.setState({reportList:r})):n.default.warning("至少保留一条数据！")},t.handleCascaderChange=function(e,a,n,r,l){if("add"===n){var i=JSON.parse(JSON.stringify(t.state.reportList));i[e].list[a]=r,i[e].info.push(l),t.setState({reportList:i})}if("edit"===n){var o=JSON.parse(JSON.stringify(t.state.alreadyReportList));o[e].complaintModelList[a].account_id=l[0].label,o[e].complaintModelList[a].ipr_id=l[1].value,o[e].complaintModelList[a].ipr_name=l[1].label,t.setState({alreadyReportList:o})}},t.handleAddKnowledgeRight=function(e){var a=JSON.parse(JSON.stringify(t.state.reportList));a[e].list.push(""),t.setState({reportList:a})},t.state={platform:e.match.params.platform,reportList:[],alreadyReportList:[],complatinAccountList:[]},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,e.Component),r(a,[{key:"componentWillMount",value:function(){this.getAlreadyReportList(),this.getComplaintAccount()}},{key:"render",value:function(){return e.createElement(l.default,{that:this})}}]),a}();t.default=c}).call(this,a(1))}}]);