(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{1077:function(e,t){},1093:function(e,t){},521:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=c(a(38)),r=c(a(222)),o=c(a(19)),i=c(a(25)),l=c(a(30)),s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(37),a(221),a(20),a(24),a(32);var u=c(a(13));function c(e){return e&&e.__esModule?e:{default:e}}l.default.Option,i.default.TextArea;var d=function(t){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.getDepartmentLeaderList=function(){var e=t.state.parentId;u.default.get("/hcm/userout/getDepartmentLeaderList",{params:{departmentId:e}}).then(function(e){t.setState({leaderList:e.data.data,departLeader:[]})}).catch(function(e){o.default.error(e.statusText)})},t.chTreeSelect=function(e,a,n,r){var o=t.state;o[r]=e,t.setState(o,function(){})},t.onChange=function(e,a){var n=t.state;n[a]=e.target.value,t.setState(n)},t.handleChange=function(e){t.setState({departLeader:e})},t.onSubmit=function(){var e=t.state,a=e.parentId,n=e.departName,r=e.departLeader;a?!n||n.length<=0?o.default.error("请输入部门名称"):u.default.post("/hcm/department/savaDepartment",{parentId:a,departName:n,departState:1,departLeader:r.join(",")}).then(function(e){if("10000"==e.data.status){o.default.success(e.data.message);var a=t.props,n=a.onShowAdd;(0,a.getDepartmentList)(),n(!1)}else o.default.warning(e.data.message)}).catch(function(e){o.default.error(e.statusText)}):o.default.error("请选择父级部门")},t.state={departmentList:t.props.departmentList,visible:t.props.visible,parentId:null,departName:null,leaderList:[],departLeader:[]},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,e.Component),s(a,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){var t=e.departmentList,a=void 0===t?[]:t;this.setState({parentId:null,departName:null,departLeader:[],visible:e.visible,departmentList:a},function(){(0==a.length||a[0]&&"0"!=a[0].key)&&a.unshift({key:"0",title:"无",value:"0"})})}},{key:"render",value:function(){var t=this,a=this.state,o=a.departmentList,l=a.visible,s=a.parentId,u=a.departName,c=(a.leaderList,a.departLeader,this.props.onShowAdd);return e.createElement(n.default,{maskClosable:!1,title:"新增部门",visible:l,className:"add-department",onCancel:function(){return c(!1)},onOk:function(){return t.onSubmit()}},e.createElement("ul",{className:"items"},e.createElement("li",{className:"item"},e.createElement("span",{className:"title  red-ck"},"父级部门"),e.createElement("div",{className:"ipt-box"},e.createElement(r.default,{style:{width:"100%"},dropdownStyle:{maxHeight:200,overflow:"auto"},value:[s],treeData:o,onChange:function(e,a,n){return t.chTreeSelect(e,a,n,"parentId")}}))),e.createElement("li",{className:"item"},e.createElement("span",{className:"title  red-ck"},"部门名称"),e.createElement("div",{className:"ipt-box"},e.createElement(i.default,{onChange:function(e){return t.onChange(e,"departName")},value:u})))))}}]),a}();t.default=d}).call(this,a(1))}}]);